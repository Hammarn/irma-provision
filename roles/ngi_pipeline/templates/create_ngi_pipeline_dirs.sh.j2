#!/bin/bash

# Minimalistic script that initiates project/site specific
# directories for ngi_pipeline logs and dbs under respective
# site's project dirs.

# To be run as respective func account:
#
# funk_004 -> ngi2016001
# funk_006 -> ngi2016003

if [ $# -ne 1 ]; then
        echo "$0: usage: create_ngi_pipeline_dirs.sh <project id>"
        exit 1
fi


mkdir -p {{ proj_root }}/$1/private/log
mkdir -p {{ proj_root }}/$1/private/db
mkdir -p {{ proj_root }}/$1/nobackup/NGI/softlinks
mkdir -p {{ proj_root }}/$1/nobackup/NGI/DENOVO_BP
mkdir -p {{ proj_root }}/$1/private/log/supervisord
ln -s /lupus/ngi/production/latest/sw/ngi_pipeline/DELIVERY.README.txt {{ proj_root }}/$1/nobackup/NGI/softlinks/DELIVERY.README.txt
ln -s /lupus/ngi/production/latest/sw/ngi_pipeline/scripts/applyRecalibration.sh {{ proj_root }}/$1/nobackup/NGI/softlinks/applyRecalibration.sh
ln -s /lupus/ngi/production/latest/sw/ngi_pipeline/scripts/bam2fastq.sh {{ proj_root }}/$1/nobackup/NGI/softlinks/bam2fastq.sh

